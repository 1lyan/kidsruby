<!DOCTYPE html>
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <title>Ruby4Kids - Programming For The Fun Of It</title>
  
  <!-- Load styles -->
  <link rel="stylesheet" href="../../css/blitzer/jquery-ui-1.8.9.custom.css" type="text/css" media="screen" title="style" charset="utf-8">
  <link rel="stylesheet" href="../../css/master.css" type="text/css" media="screen" title="style" charset="utf-8">
  
  <!-- Load js -->

  <script type="text/javascript" src="../../js/jquery-1.4.4.min.js"></script>
  <script type="text/javascript" src="../../js/jquery-ui-1.8.9.custom.min.js"></script>
  <script type="text/javascript" src="../../js/lessons.js"></script>
</head>
<body class="lesson-set">
  <h1>Ruby4Kids - Game Programming</h1>
  <nav id="top">
    <a href="#back" id="prev-lesson">&laquo; Back</a>
    <a href="../index.html">Back to Lessons</a>
    <a href="#next" id="next-lesson">Next &raquo;</a>
  </nav>
    
  <article class="lesson"><h1>Lesson 2</h1>
    <section class="page"><h1>This is Ruby4Kids</h1>
      <p>OK the first lesson we learned to open a window in gosu
we learned to draw a player inside the game window
we learned to move this player around the game window
and we limited its movement to just the bounds of the game window.</p>
      <p>Now we are ready to add more excitement to the game.</p>
      <p>How about if we play dodge ball with our player. We can have a ball that appears as if thrown into the
game window and our player dodges the ball by moving with the arrow keys.</p>
      <p>So let's try that. First let's find a picture of a ball we can use.</p>

      <p>So we create a new file for our dodge ball. We will call this file <strong>ball.rb</strong> and inside of it, we will have our familiar: </p>
      <pre>
<code>class Ball
  def initialize(game_window)
    @game_window = game_window
  end
  	
  def update
  end
	
  def draw
  end
end</code>
</pre>
      <p>then we will make this ball come from the top of the screen and from random places it should go down</p>
      <p>we accomplish this by setting the initial position @x to a random number between 0 and the width of the game window in pixels.</p>
      <code>@x = rand(@game_window.width)</code>
      <p>this means that when the game starts the random method will give us a postion
somewhere between 0 and the width of the game window</p>
      <p>the @y position for this ball will be 0 since it is at the top during initialize.</p>
      <p>now with each update, we need to make the ball move down, so let's say the ball moves 1 pixel with every udpate. we will see how fast that is.</p>
      <p>we do this in the update, we change the @y position by 1 pixel like this</p>
      <code>@y = @y -1</code>
      <p>as we have learned, we need to trap for when the ball goes out of the screen.
if the ball goes beyond the screen, we want to start again, find a random position
from the top of the screen and drop the ball again.</p>
      <p>so we can do this by adding our familiar if statement like this</p>
<pre>
<code>if @y > @game_window.height
  @y = 0
else
  @y = @y - 1
end</code>
</pre>
      <p>now we will do something else, we want the ball to start dropping from another position
not the same x position as before. So in the line where we reset @y to 0, we also 
change the @x position to be another random position like this</p>

      <code>@x = rand(@game_window.width)</code>

    </section>
    <section class="page"><h1>OK, let's see if this works.</h1>
      <p>The ball goes down as expected, we now need to make sure that if the ball hits the player, the game stops. How do we do this?</p>
      <p>back to our update method. In the update method, we can write a method
to check for this and stop the game if hit.</p>

      <p>distance between ball and the player</p>
<pre>
<code>if @player1.hit_by? @ball
  stop_the_game
end
if Gosu::distance(@x, @y, star.x, star.y) &lt; 35
end
</code>
</pre>
    </section>
  </article>

  <a href="#top">Back to top</a>
    
</body>
</html>
